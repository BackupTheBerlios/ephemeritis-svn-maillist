<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Ephemeritis-svn] r261 - in branches/new-vsop-prepare/src/c:	libephemeritis tests
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ephemeritis-svn/2006-July/index.html" >
   <LINK REL="made" HREF="mailto:ephemeritis-svn%40lists.berlios.de?Subject=Re%3A%20%5BEphemeritis-svn%5D%20r261%20-%20in%20branches/new-vsop-prepare/src/c%3A%0A%09libephemeritis%20tests&In-Reply-To=%3C200607240838.k6O8cTMp026440%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000113.html">
   <LINK REL="Next"  HREF="000115.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Ephemeritis-svn] r261 - in branches/new-vsop-prepare/src/c:	libephemeritis tests</H1>
    <B>izogi at BerliOS</B> 
    <A HREF="mailto:ephemeritis-svn%40lists.berlios.de?Subject=Re%3A%20%5BEphemeritis-svn%5D%20r261%20-%20in%20branches/new-vsop-prepare/src/c%3A%0A%09libephemeritis%20tests&In-Reply-To=%3C200607240838.k6O8cTMp026440%40sheep.berlios.de%3E"
       TITLE="[Ephemeritis-svn] r261 - in branches/new-vsop-prepare/src/c:	libephemeritis tests">izogi at mail.berlios.de
       </A><BR>
    <I>Mon Jul 24 10:38:29 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000113.html">[Ephemeritis-svn] r260 - in branches/new-vsop-prepare/src/c:	libephemeritis tests
</A></li>
        <LI>Next message: <A HREF="000115.html">[Ephemeritis-svn] r262 - in branches/new-vsop-prepare/src/c:	libephemeritis tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#114">[ date ]</a>
              <a href="thread.html#114">[ thread ]</a>
              <a href="subject.html#114">[ subject ]</a>
              <a href="author.html#114">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: izogi
Date: 2006-07-24 10:38:27 +0200 (Mon, 24 Jul 2006)
New Revision: 261

Modified:
   branches/new-vsop-prepare/src/c/libephemeritis/aberration.c
   branches/new-vsop-prepare/src/c/libephemeritis/calendar.c
   branches/new-vsop-prepare/src/c/libephemeritis/conversions.c
   branches/new-vsop-prepare/src/c/libephemeritis/elliptical.c
   branches/new-vsop-prepare/src/c/libephemeritis/elp2000.c
   branches/new-vsop-prepare/src/c/libephemeritis/ephemeritis.h
   branches/new-vsop-prepare/src/c/libephemeritis/equationoftime.c
   branches/new-vsop-prepare/src/c/libephemeritis/equinox.c
   branches/new-vsop-prepare/src/c/libephemeritis/nutation.c
   branches/new-vsop-prepare/src/c/libephemeritis/precession.c
   branches/new-vsop-prepare/src/c/libephemeritis/refraction.c
   branches/new-vsop-prepare/src/c/libephemeritis/riseset.c
   branches/new-vsop-prepare/src/c/libephemeritis/solar.c
   branches/new-vsop-prepare/src/c/libephemeritis/util.c
   branches/new-vsop-prepare/src/c/libephemeritis/vsop_calculate.c
   branches/new-vsop-prepare/src/c/tests/validate_meeus.c
Log:
Adding eph prefix to conversions functions.


Modified: branches/new-vsop-prepare/src/c/libephemeritis/aberration.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/aberration.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/aberration.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -47,12 +47,12 @@
      */
     double e_terms[] = { 0.016708634, -0.000042037, -0.0000001267 };
     double p_terms[] =
-	{ d_to_r(102.93735), d_to_r(1.71946), d_to_r(0.00046) };
+    { ephDToR(102.93735), ephDToR(1.71946), ephDToR(0.00046) };
 
     *e = polynomial(e_terms, 3, T);
     *p = polynomial(p_terms, 3, T);
 
-    *K = d_to_r(dms_to_d(0, 0, 20.49552));
+    *K = ephDToR(ephDmsToD(0, 0, 20.49552));
 }
 
 

Modified: branches/new-vsop-prepare/src/c/libephemeritis/calendar.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/calendar.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/calendar.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -265,8 +265,8 @@
     const double theta0 =
 	280.46061837 + 360.98564736629 * (jd - 2451545.0) +
 	0.000387933 * T2 - T3 / 38710000;
-    const double result = d_to_r(theta0);
-    return modpi2(result);
+    const double result = ephDToR(theta0);
+    return ephModPi2(result);
 }
 
 /*! @brief Returns the Besselian epoch for a given Julian Day.

Modified: branches/new-vsop-prepare/src/c/libephemeritis/conversions.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/conversions.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/conversions.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -44,7 +44,7 @@
  *  @param[out] mn   Minutes (as an integer).
  *  @param[out] sec  Seconds (as a floating point number).
  */
-void d_to_dms(double x, int *deg, int *mn, double *sec)
+void ephDToDms(double x, int *deg, int *mn, double *sec)
 {
     const EPH_Bool negative = (x &lt; 0.0);
     x = fabs(x);
@@ -71,7 +71,7 @@
  *
  *  @return        The value in radians.
  */
-double d_to_r(double d)
+double ephDToR(double d)
 {
     return d * (pi / 180.0);
 }
@@ -89,10 +89,10 @@
  *
  *  @return       b - a, in radians.
  *
- *  @sa modpi2
- *  @sa circumpi
+ *  @sa ephModPi2
+ *  @sa ephCircumPi
  */
-double diff_angle(double a, double b)
+double ephDiffAngle(double a, double b)
 {
     double result;
     if (b &lt; a) {
@@ -117,7 +117,7 @@
  *
  *  @return          Decimal degrees. 
  */
-double dms_to_d(int deg, int min, double sec)
+double ephDmsToD(int deg, int min, double sec)
 {
     double result = abs(deg) + abs(min) / 60.0 + fabs(sec) / 3600.0;
     if (deg &lt; 0 || min &lt; 0 || sec &lt; 0) {
@@ -137,14 +137,14 @@
  *
  *  @sa ephObliquityHi + ephNutInObl for calculating true obliquity.
  */
-void ecl_to_equ(EPH_EclipticalCoords ecl_pos, double obliquity,
+void ephEclToEqu(EPH_EclipticalCoords ecl_pos, double obliquity,
 		EPH_EquatorialCoords *equ_pos)
 {
     const double cose = cos(obliquity);
     const double sine = sin(obliquity);
     const double sinl = sin(ecl_pos.longitude);
     equ_pos-&gt;ra =
-	modpi2(atan2(sinl * cose - tan(ecl_pos.latitude) * sine, cos(ecl_pos.longitude)));
+	ephModPi2(atan2(sinl * cose - tan(ecl_pos.latitude) * sine, cos(ecl_pos.longitude)));
     equ_pos-&gt;dec = asin(sin(ecl_pos.latitude) * cose + cos(ecl_pos.latitude) * sine * sinl);
 }
 
@@ -163,7 +163,7 @@
  *
  *  @todo Write unit tests.
  */
-void equ_to_horiz(EPH_GeographicCoords geo_pos,
+void ephEquToHoriz(EPH_GeographicCoords geo_pos,
 		  EPH_EquatorialCoords equ_pos,
 		  EPH_HorizonCoords *hor_pos
 		  )
@@ -192,7 +192,7 @@
  *
  *  @author Mike McGavin
  */
-void horiz_to_equ(EPH_GeographicCoords geo_pos,
+void ephHorizToEqu(EPH_GeographicCoords geo_pos,
 		  EPH_HorizonCoords hor_pos,
 		  EPH_EquatorialCoords *equ_pos)
 {
@@ -215,13 +215,13 @@
  *
  *  @sa ephObliquityHi + ephNutInObl for calculating true obliquity.
  */
-void equ_to_ecl(EPH_EquatorialCoords equ_pos, double obliquity, EPH_EclipticalCoords *ecl_pos)
+void ephEquToEcl(EPH_EquatorialCoords equ_pos, double obliquity, EPH_EclipticalCoords *ecl_pos)
 {
     const double cose = cos(obliquity);
     const double sine = sin(obliquity);
     const double sina = sin(equ_pos.ra);
-    ecl_pos-&gt;longitude = modpi2(atan2(sina * cose + tan(equ_pos.dec) * sine, cos(equ_pos.ra)));
-    ecl_pos-&gt;latitude = modpi2(asin(sin(equ_pos.dec) * cose - cos(equ_pos.dec) * sine * sina));
+    ecl_pos-&gt;longitude = ephModPi2(atan2(sina * cose + tan(equ_pos.dec) * sine, cos(equ_pos.ra)));
+    ecl_pos-&gt;latitude = ephModPi2(asin(sin(equ_pos.dec) * cose - cos(equ_pos.dec) * sine * sina));
 }
 
 /*! @brief Converts a fractional day (0.0..1.0) to integral
@@ -233,7 +233,7 @@
  *  @param[out] min  Minute (0..59).
  *  @param[out] sec  Second (0..59).
  */
-void fday_to_hms(double day, int *hour, int *min, double *sec)
+void ephFdayToHms(double day, int *hour, int *min, double *sec)
 {
     /*
        const long tsec = (long) (day * seconds_per_day);
@@ -260,7 +260,7 @@
  *
  *  @return         Fractional day, 0.0..1.0.
  */
-double hms_to_fday(int hr, int mn, double sec)
+double ephHmsToFday(int hr, int mn, double sec)
 {
     return ((hr / 24.0) + (mn / minutes_per_day) +
 	    (sec / seconds_per_day));
@@ -274,9 +274,9 @@
  *
  *  @author Mike McGavin.
  */
-double fday_to_r(const double fday)
+double ephFdayToR(const double fday)
 {
-    return modpi2(fday * 2 * pi);
+    return ephModPi2(fday * 2 * pi);
 }
 
 
@@ -288,9 +288,9 @@
  *
  *  @author Mike McGavin.
  */
-double r_to_fday(const double r)
+double ephRToFday(const double r)
 {
-    return modpi2(r) / (2 * pi);
+    return ephModPi2(r) / (2 * pi);
 }
 
 /*! @brief Converts radians to hours-minutes-seconds.
@@ -302,9 +302,9 @@
  *
  *  @author Mike McGavin.
  */
-void r_to_hms(const double r, int *hr, int *mn, double *sec)
+void ephRToHms(const double r, int *hr, int *mn, double *sec)
 {
-    return fday_to_hms(r_to_fday(r), hr, mn, sec);
+    return ephFdayToHms(ephRToFday(r), hr, mn, sec);
 }
 
 
@@ -316,9 +316,9 @@
  *
  *  @return         The angle in radians.
  */
-double hms_to_r(const int hr, const int mn, const double sec)
+double ephHmsToR(const int hr, const int mn, const double sec)
 {
-    return fday_to_r(hms_to_fday(hr, mn, sec));
+    return ephFdayToR(ephHmsToFday(hr, mn, sec));
 }
 
 /*! @brief Reduces an angle in radians to the range 0..2pi.
@@ -327,10 +327,10 @@
  *
  *  @return        An angle in radians, in the range 0..2pi.
  *
- *  @sa diff_angle
- *  @sa circumpi
+ *  @sa ephDiffAngle
+ *  @sa ephCircumPi
  */
-double modpi2(double x)
+double ephModPi2(double x)
 {
     x = fmod(x, pi2);
     if (x &lt; 0.0) {
@@ -346,13 +346,13 @@
  *
  *  @return        An angle in radians, in the range -pi..pi.
  *
- *  @sa modpi2
+ *  @sa ephModPi2
  *
  *  @author Mike McGavin.
  */
-double circumpi(double x)
+double ephCircumPi(double x)
 {
-    x = modpi2(x);
+    x = ephModPi2(x);
     return x &gt; pi ? x - 2 * pi : x;
 }
 
@@ -362,7 +362,7 @@
  *
  *  @return        Degrees.
  */
-double r_to_d(double r)
+double ephRToD(double r)
 {
     return r * (180.0 / pi);
 }

Modified: branches/new-vsop-prepare/src/c/libephemeritis/elliptical.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/elliptical.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/elliptical.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -26,7 +26,7 @@
  *  _Astronomical Algorithms_, second edition, 1998, Willmann-Bell,
  *  Inc.
  *
- *  @todo Check that modpi2() is used in all the appropriate places,
+ *  @todo Check that ephModPi2() is used in all the appropriate places,
  *  when radian values are returned.  (Be careful about declination
  *  and similar values, though, since it's sometimes more useful to
  *  have -90 degrees than +270 degrees.)
@@ -137,7 +137,7 @@
 /* 	/\* Light time in days. *\/ */
 /* 	const double tau = 0.0057755183 * dist; */
 
-/* 	if (fabs(diff_angle(l, l0)) &lt; pi2 * delta) { */
+/* 	if (fabs(ephDiffAngle(l, l0)) &lt; pi2 * delta) { */
 /* 	    ok = true; */
 /* 	    break; */
 /* 	} */
@@ -156,7 +156,7 @@
 /*     l += n_in_l; */
 
 /*     /\* Equatorial coordinates. *\/ */
-/*     ecl_to_equ(l, b, epsilon, ra, dec); */
+/*     ephEclToEqu(l, b, epsilon, ra, dec); */
 
 /*     /\* Return success. *\/ */
 /*     return 0; */
@@ -167,7 +167,7 @@
  *
  *  The results will be ecliptical, corrected for light-time and
  *  aberration.  They can be converted to equatorial coordinates with
- *  the ecl_to_equ function.
+ *  the ephEclToEqu function.
  *
  *  @param[in]  jd        Julian Day of an approximate time of the event
  *                        in dynamical time.
@@ -253,7 +253,7 @@
 	/* Light time in days. */
 	const double tau = 0.0057755183 * dist;
 
-	if (fabs(diff_angle(l, l0)) &lt; pi2 * delta) {
+        if (fabs(ephDiffAngle(l, l0)) &lt; pi2 * delta) {
 	    worked = true;
 	    break;
 	}
@@ -401,7 +401,7 @@
     }
 
     double E = e0 * f;
-    return modpi2(E);
+    return ephModPi2(E);
 }
 
 
@@ -641,7 +641,7 @@
     double r_e = sqrt(s * s + n * n + t * t);
     *r_earth = r_e;
 
-    equ_pos-&gt;ra = modpi2(atan2(n, s));
+    equ_pos-&gt;ra = ephModPi2(atan2(n, s));
     equ_pos-&gt;dec = asin(t / r_e);
 
     double R = sqrt(sol.x * sol.x + sol.y * sol.y + sol.z * sol.z);

Modified: branches/new-vsop-prepare/src/c/libephemeritis/elp2000.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/elp2000.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/elp2000.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -194,39 +194,39 @@
      * Constant terms.
      */
     const double _kL1[] =
-	{ d_to_r(218.3164477), d_to_r(481267.88123421), d_to_r(-0.0015786),
-	d_to_r(1.0 / 538841), d_to_r(-1.0 / 65194000)
+	{ ephDToR(218.3164477), ephDToR(481267.88123421), ephDToR(-0.0015786),
+	ephDToR(1.0 / 538841), ephDToR(-1.0 / 65194000)
     };
     const double _kD[] =
-	{ d_to_r(297.8501921), d_to_r(445267.1114034), d_to_r(-0.0018819),
-	d_to_r(1.0 / 545868), d_to_r(-1.0 / 113065000)
+	{ ephDToR(297.8501921), ephDToR(445267.1114034), ephDToR(-0.0018819),
+	ephDToR(1.0 / 545868), ephDToR(-1.0 / 113065000)
     };
     const double _kM[] =
-	{ d_to_r(357.5291092), d_to_r(35999.0502909), d_to_r(-0.0001536),
-	d_to_r(1.0 / 24490000)
+	{ ephDToR(357.5291092), ephDToR(35999.0502909), ephDToR(-0.0001536),
+	ephDToR(1.0 / 24490000)
     };
     const double _kM1[] =
-	{ d_to_r(134.9633964), d_to_r(477198.8675055), d_to_r(0.0087414),
-	d_to_r(1.0 / 69699), d_to_r(-1.0 / 14712000)
+	{ ephDToR(134.9633964), ephDToR(477198.8675055), ephDToR(0.0087414),
+	ephDToR(1.0 / 69699), ephDToR(-1.0 / 14712000)
     };
     const double _kF[] =
-	{ d_to_r(93.2720950), d_to_r(483202.0175233), d_to_r(-0.0036539),
-	d_to_r(-1.0 / 3526000), d_to_r(1.0 / 863310000)
+	{ ephDToR(93.2720950), ephDToR(483202.0175233), ephDToR(-0.0036539),
+	ephDToR(-1.0 / 3526000), ephDToR(1.0 / 863310000)
     };
-    const double _kA1[] = { d_to_r(119.75), d_to_r(131.849) };
-    const double _kA2[] = { d_to_r(53.09), d_to_r(479264.290) };
-    const double _kA3[] = { d_to_r(313.45), d_to_r(481266.484) };
+    const double _kA1[] = { ephDToR(119.75), ephDToR(131.849) };
+    const double _kA2[] = { ephDToR(53.09), ephDToR(479264.290) };
+    const double _kA3[] = { ephDToR(313.45), ephDToR(481266.484) };
     const double _kE[] = { 1.0, -0.002516, -0.0000074 };
 
-    *L1 = modpi2(polynomial(_kL1, 5, T));
-    *D = modpi2(polynomial(_kD, 5, T));
-    *M = modpi2(polynomial(_kM, 4, T));
-    *M1 = modpi2(polynomial(_kM1, 5, T));
-    *F = modpi2(polynomial(_kF, 5, T));
+    *L1 = ephModPi2(polynomial(_kL1, 5, T));
+    *D = ephModPi2(polynomial(_kD, 5, T));
+    *M = ephModPi2(polynomial(_kM, 4, T));
+    *M1 = ephModPi2(polynomial(_kM1, 5, T));
+    *F = ephModPi2(polynomial(_kF, 5, T));
 
-    *A1 = modpi2(polynomial(_kA1, 2, T));
-    *A2 = modpi2(polynomial(_kA2, 2, T));
-    *A3 = modpi2(polynomial(_kA3, 2, T));
+    *A1 = ephModPi2(polynomial(_kA1, 2, T));
+    *A2 = ephModPi2(polynomial(_kA2, 2, T));
+    *A3 = ephModPi2(polynomial(_kA3, 2, T));
 
     *E = polynomial(_kE, 3, T);
     *E2 = (*E) * (*E);
@@ -303,8 +303,8 @@
 	(175 * sin(A1 - F)) +
 	(175 * sin(A1 + F)) + (127 * sin(L1 - M1)) - (115 * sin(L1 + M1));
 
-    *longitude = L1 + d_to_r(lsum / 1000000);
-    *latitude = d_to_r(bsum / 1000000);
+    *longitude = L1 + ephDToR(lsum / 1000000);
+    *latitude = ephDToR(bsum / 1000000);
     *radius = 385000.56 + (rsum / 1000);
 }
 
@@ -368,7 +368,7 @@
 
     lsum += (3958 * sin(A1)) + (1962 * sin(L1 - F)) + (318 * sin(A2));
 
-    const double L = L1 + d_to_r(lsum / 1000000);
+    const double L = L1 + ephDToR(lsum / 1000000);
     return L;
 }
 
@@ -404,7 +404,7 @@
 	(175 * sin(A1 - F)) +
 	(175 * sin(A1 + F)) + (127 * sin(L1 - M1)) - (115 * sin(L1 + M1));
 
-    const double B = d_to_r(bsum / 1000000);
+    const double B = ephDToR(bsum / 1000000);
     return B;
 }
 

Modified: branches/new-vsop-prepare/src/c/libephemeritis/ephemeritis.h
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/ephemeritis.h	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/ephemeritis.h	2006-07-24 08:38:27 UTC (rev 261)
@@ -262,24 +262,25 @@
 
 
 /* conversions.c */
-void d_to_dms(double x, int *deg, int *mn, double *sec);
-double d_to_r(double d);
-double diff_angle(double a, double b);
-double dms_to_d(int deg, int min, double sec);
-void ecl_to_equ(EPH_EclipticalCoords ecl_pos, double obliquity, EPH_EquatorialCoords *equ_pos);
-void equ_to_horiz(EPH_GeographicCoords geo_pos, EPH_EquatorialCoords equ_pos, EPH_HorizonCoords *hor_pos);
-void horiz_to_equ(EPH_GeographicCoords geo_pos, EPH_HorizonCoords hor_pos, EPH_EquatorialCoords *equ_pos);
-void equ_to_ecl(EPH_EquatorialCoords equ_pos, double obliquity, EPH_EclipticalCoords *ecl_pos);
-void fday_to_hms(double day, int *hour, int *min, double *sec);
-double hms_to_fday(int hr, int mn, double sec);
-double fday_to_r(const double fday);
-double r_to_fday(const double r);
-void r_to_hms(const double r, int *hr, int *mn, double *sec);
-double hms_to_r(const int hr, const int mn, const double sec);
-double modpi2(double x);
-double circumpi(double x);
-double r_to_d(double r);
+void   ephDToDms(double x, int *deg, int *mn, double *sec);
+double ephDToR(double d);
+double ephDiffAngle(double a, double b);
+double ephDmsToD(int deg, int min, double sec);
+void   ephEclToEqu(EPH_EclipticalCoords ecl_pos, double obliquity, EPH_EquatorialCoords *equ_pos);
+void   ephEquToHoriz(EPH_GeographicCoords geo_pos, EPH_EquatorialCoords equ_pos, EPH_HorizonCoords *hor_pos);
+void   ephHorizToEqu(EPH_GeographicCoords geo_pos, EPH_HorizonCoords hor_pos, EPH_EquatorialCoords *equ_pos);
+void   ephEquToEcl(EPH_EquatorialCoords equ_pos, double obliquity, EPH_EclipticalCoords *ecl_pos);
+void   ephFdayToHms(double day, int *hour, int *min, double *sec);
+double ephHmsToFday(int hr, int mn, double sec);
+double ephFdayToR(const double fday);
+double ephRToFday(const double r);
+void   ephRToHms(const double r, int *hr, int *mn, double *sec);
+double ephHmsToR(const int hr, const int mn, const double sec);
+double ephRToD(double r);
 
+double ephModPi2(double x);
+double ephCircumPi(double x);
+
 /* refraction.c */
 double apparent_to_geom_alt(const double ap_alt, const double P,
 			    const double T);

Modified: branches/new-vsop-prepare/src/c/libephemeritis/equationoftime.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/equationoftime.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/equationoftime.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -58,7 +58,7 @@
 	280.4664567, 360007.6982779, 0.03032028, 1.0 / 49931.0,
 	-1.0 / 15300.0, -1.0 / 2000000.0
     };
-    double L0 = modpi2(d_to_r(polynomial(_terms, 6, T)));
+    double L0 = ephModPi2(ephDToR(polynomial(_terms, 6, T)));
 
     /* Solar longitude, latitude and radius. */
     EPH_VsopErrorState e_state;
@@ -76,10 +76,10 @@
     double obl = ephObliquityHi(jd) + ephNutInObl(jd);
 
     EPH_EquatorialCoords equ_pos;
-    ecl_to_equ(s_sc.ecl, obl, &amp;equ_pos);
+    ephEclToEqu(s_sc.ecl, obl, &amp;equ_pos);
 
     /* Do the final calculation, and return it. */
     *eot_result =
-            L0 - d_to_r(0.0057183) - equ_pos.ra + ephNutInLon(jd) * cos(d_to_r(obl));
+            L0 - ephDToR(0.0057183) - equ_pos.ra + ephNutInLon(jd) * cos(ephDToR(obl));
     return ok;
 }

Modified: branches/new-vsop-prepare/src/c/libephemeritis/equinox.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/equinox.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/equinox.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -104,30 +104,30 @@
     {9, 3.9746383055666863, 21.3299131347179802},
     {8, 0.2696533694331239, 294.2463501373704844}
     /*
-       {485, d_to_r(324.96),  d_to_r(  1934.136)},
-       {203, d_to_r(337.23),  d_to_r( 32964.467)},
-       {199, d_to_r(342.08),  d_to_r(    20.186)},
-       {182, d_to_r( 27.85),  d_to_r(445267.112)},
-       {156, d_to_r( 73.14),  d_to_r( 45036.886)},
-       {136, d_to_r(171.52),  d_to_r( 22518.443)},
-       { 77, d_to_r(222.54),  d_to_r( 65928.934)},
-       { 74, d_to_r(296.72),  d_to_r(  3034.906)},
-       { 70, d_to_r(243.58),  d_to_r(  9037.513)},
-       { 58, d_to_r(119.81),  d_to_r( 33718.147)},
-       { 52, d_to_r(297.17),  d_to_r(   150.678)},
-       { 50, d_to_r( 21.02),  d_to_r(  2281.226)},
-       { 45, d_to_r(247.54),  d_to_r( 29929.562)},
-       { 44, d_to_r(325.15),  d_to_r( 31555.956)},
-       { 29, d_to_r( 60.93),  d_to_r(  4443.417)},
-       { 18, d_to_r(155.12),  d_to_r( 67555.328)},
-       { 17, d_to_r(288.79),  d_to_r(  4562.452)},
-       { 16, d_to_r(198.04),  d_to_r( 62894.029)},
-       { 14, d_to_r(199.76),  d_to_r( 31436.921)},
-       { 12, d_to_r( 95.39),  d_to_r( 14577.848)},
-       { 12, d_to_r(287.11),  d_to_r( 31931.756)},
-       { 12, d_to_r(320.81),  d_to_r( 34777.259)},
-       {  9, d_to_r(227.73),  d_to_r(  1222.114)},
-       {  8, d_to_r( 15.45),  d_to_r( 16859.074)}
+       {485, ephDToR(324.96),  ephDToR(  1934.136)},
+       {203, ephDToR(337.23),  ephDToR( 32964.467)},
+       {199, ephDToR(342.08),  ephDToR(    20.186)},
+       {182, ephDToR( 27.85),  ephDToR(445267.112)},
+       {156, ephDToR( 73.14),  ephDToR( 45036.886)},
+       {136, ephDToR(171.52),  ephDToR( 22518.443)},
+       { 77, ephDToR(222.54),  ephDToR( 65928.934)},
+       { 74, ephDToR(296.72),  ephDToR(  3034.906)},
+       { 70, ephDToR(243.58),  ephDToR(  9037.513)},
+       { 58, ephDToR(119.81),  ephDToR( 33718.147)},
+       { 52, ephDToR(297.17),  ephDToR(   150.678)},
+       { 50, ephDToR( 21.02),  ephDToR(  2281.226)},
+       { 45, ephDToR(247.54),  ephDToR( 29929.562)},
+       { 44, ephDToR(325.15),  ephDToR( 31555.956)},
+       { 29, ephDToR( 60.93),  ephDToR(  4443.417)},
+       { 18, ephDToR(155.12),  ephDToR( 67555.328)},
+       { 17, ephDToR(288.79),  ephDToR(  4562.452)},
+       { 16, ephDToR(198.04),  ephDToR( 62894.029)},
+       { 14, ephDToR(199.76),  ephDToR( 31436.921)},
+       { 12, ephDToR( 95.39),  ephDToR( 14577.848)},
+       { 12, ephDToR(287.11),  ephDToR( 31931.756)},
+       { 12, ephDToR(320.81),  ephDToR( 34777.259)},
+       {  9, ephDToR(227.73),  ephDToR(  1222.114)},
+       {  8, ephDToR( 15.45),  ephDToR( 16859.074)}
      */
 };
 
@@ -189,7 +189,7 @@
     double jd = polynomial(series_poly, 5, Y);
 
     const double T = ephJdToJCent(jd);
-    const double W = d_to_r(35999.373 * T - 2.47);
+    const double W = ephDToR(35999.373 * T - 2.47);
     const double delta_lambda = 1 + 0.0334 * cos(W) + 0.0007 * cos(2 * W);
     double S = 0.0;
 
@@ -280,7 +280,7 @@
         sc_s.ecl.longitude += ephNutInLon(jd) + aberration_low(sc_s.R);
 
 	/* Meeus uses jd + 58 * sin(diff(...)) */
-	jd += diff_angle(sc_s.ecl.longitude, circ) * _k_sun_motion;
+        jd += ephDiffAngle(sc_s.ecl.longitude, circ) * _k_sun_motion;
 	if (fabs(jd - jd0) &lt; delta) {
 	    *equinox_result = jd;
 	    return ok;

Modified: branches/new-vsop-prepare/src/c/libephemeritis/nutation.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/nutation.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/nutation.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -194,37 +194,37 @@
     if (!initialised) {
 	initialised = true;
 
-	_kD[0] = d_to_r(297.85036);
-	_kD[1] = d_to_r(445267.111480);
-	_kD[2] = d_to_r(-0.0019142);
-	_kD[3] = d_to_r(1.0 / 189474);
+	_kD[0] = ephDToR(297.85036);
+	_kD[1] = ephDToR(445267.111480);
+	_kD[2] = ephDToR(-0.0019142);
+	_kD[3] = ephDToR(1.0 / 189474);
 
-	_kM[0] = d_to_r(357.52772);
-	_kM[1] = d_to_r(35999.050340);
-	_kM[2] = d_to_r(-0.0001603);
-	_kM[3] = d_to_r(-1.0 / 300000);
+	_kM[0] = ephDToR(357.52772);
+	_kM[1] = ephDToR(35999.050340);
+	_kM[2] = ephDToR(-0.0001603);
+	_kM[3] = ephDToR(-1.0 / 300000);
 
-	_kM1[0] = d_to_r(134.96298);
-	_kM1[1] = d_to_r(477198.867398);
-	_kM1[2] = d_to_r(0.0086972);
-	_kM1[3] = d_to_r(1.0 / 56250);
+	_kM1[0] = ephDToR(134.96298);
+	_kM1[1] = ephDToR(477198.867398);
+	_kM1[2] = ephDToR(0.0086972);
+	_kM1[3] = ephDToR(1.0 / 56250);
 
-	_kF[0] = d_to_r(93.27191);
-	_kF[1] = d_to_r(483202.017538);
-	_kF[2] = d_to_r(-0.0036825);
-	_kF[3] = d_to_r(1.0 / 327270);
+	_kF[0] = ephDToR(93.27191);
+	_kF[1] = ephDToR(483202.017538);
+	_kF[2] = ephDToR(-0.0036825);
+	_kF[3] = ephDToR(1.0 / 327270);
 
-	_ko[0] = d_to_r(125.04452);
-	_ko[1] = d_to_r(-1934.136261);
-	_ko[2] = d_to_r(0.0020708);
-	_ko[3] = d_to_r(1.0 / 450000);
+	_ko[0] = ephDToR(125.04452);
+	_ko[1] = ephDToR(-1934.136261);
+	_ko[2] = ephDToR(0.0020708);
+	_ko[3] = ephDToR(1.0 / 450000);
     }
 
-    *D = modpi2(polynomial(_kD, 4, T));
-    *M = modpi2(polynomial(_kM, 4, T));
-    *M1 = modpi2(polynomial(_kM1, 4, T));
-    *F = modpi2(polynomial(_kF, 4, T));
-    *omega = modpi2(polynomial(_ko, 4, T));
+    *D = ephModPi2(polynomial(_kD, 4, T));
+    *M = ephModPi2(polynomial(_kM, 4, T));
+    *M1 = ephModPi2(polynomial(_kM1, 4, T));
+    *F = ephModPi2(polynomial(_kF, 4, T));
+    *omega = ephModPi2(polynomial(_ko, 4, T));
 }
 
 
@@ -259,7 +259,7 @@
 	     ((_tbl[idx].psiT / 100000.0) * T)) * sin(arg);
     }
     deltaPsi /= 3600;
-    deltaPsi = d_to_r(deltaPsi);
+    deltaPsi = ephDToR(deltaPsi);
     return deltaPsi;
 }
 
@@ -295,7 +295,7 @@
     }
 
     deltaEps /= 3600;
-    deltaEps = d_to_r(deltaEps);
+    deltaEps = ephDToR(deltaEps);
     return deltaEps;
 }
 
@@ -359,10 +359,10 @@
     static EPH_Bool initialised = false;
     if (!initialised) {
 	initialised = true;
-	_el0[0] = d_to_r(dms_to_d(23, 26, 21.448));
-	_el0[1] = d_to_r(dms_to_d(0, 0, -46.8150));
-	_el0[2] = d_to_r(dms_to_d(0, 0, -0.00059));
-	_el0[3] = d_to_r(dms_to_d(0, 0, 0.001813));
+	_el0[0] = ephDToR(ephDmsToD(23, 26, 21.448));
+	_el0[1] = ephDToR(ephDmsToD(0, 0, -46.8150));
+	_el0[2] = ephDToR(ephDmsToD(0, 0, -0.00059));
+	_el0[3] = ephDToR(ephDmsToD(0, 0, 0.001813));
     }
 
     const double T = ephJdToJCent(jd);
@@ -391,17 +391,17 @@
     static double _el1[11];
     static EPH_Bool initialised = false;
     if (!initialised) {
-	_el1[0] = d_to_r(dms_to_d(23, 26, 21.448));
-	_el1[1] = d_to_r(dms_to_d(0, 0, -4680.93));
-	_el1[2] = d_to_r(dms_to_d(0, 0, -1.55));
-	_el1[3] = d_to_r(dms_to_d(0, 0, 1999.25));
-	_el1[4] = d_to_r(dms_to_d(0, 0, -51.38));
-	_el1[5] = d_to_r(dms_to_d(0, 0, -249.67));
-	_el1[6] = d_to_r(dms_to_d(0, 0, -39.05));
-	_el1[7] = d_to_r(dms_to_d(0, 0, 7.12));
-	_el1[8] = d_to_r(dms_to_d(0, 0, 27.87));
-	_el1[9] = d_to_r(dms_to_d(0, 0, 5.79));
-	_el1[10] = d_to_r(dms_to_d(0, 0, 2.45));
+	_el1[0] = ephDToR(ephDmsToD(23, 26, 21.448));
+	_el1[1] = ephDToR(ephDmsToD(0, 0, -4680.93));
+	_el1[2] = ephDToR(ephDmsToD(0, 0, -1.55));
+	_el1[3] = ephDToR(ephDmsToD(0, 0, 1999.25));
+	_el1[4] = ephDToR(ephDmsToD(0, 0, -51.38));
+	_el1[5] = ephDToR(ephDmsToD(0, 0, -249.67));
+	_el1[6] = ephDToR(ephDmsToD(0, 0, -39.05));
+	_el1[7] = ephDToR(ephDmsToD(0, 0, 7.12));
+	_el1[8] = ephDToR(ephDmsToD(0, 0, 27.87));
+	_el1[9] = ephDToR(ephDmsToD(0, 0, 5.79));
+	_el1[10] = ephDToR(ephDmsToD(0, 0, 2.45));
     }
 
 

Modified: branches/new-vsop-prepare/src/c/libephemeritis/precession.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/precession.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/precession.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -96,9 +96,9 @@
     double theta = polynomial(data8, 4, t);
 
     EPH_PrecessionElEquatorial pceq;
-    pceq.zeta_rad = modpi2((zeta * 2 * pi) / (3600.0 * 360.0));
-    pceq.z_rad = modpi2((z * 2 * pi) / (3600.0 * 360.0));
-    pceq.theta_rad = modpi2((theta * 2 * pi) / (3600.0 * 360.0));
+    pceq.zeta_rad = ephModPi2((zeta * 2 * pi) / (3600.0 * 360.0));
+    pceq.z_rad = ephModPi2((z * 2 * pi) / (3600.0 * 360.0));
+    pceq.theta_rad = ephModPi2((theta * 2 * pi) / (3600.0 * 360.0));
     return pceq;
 }
 
@@ -135,8 +135,8 @@
 						    pceq.zeta_rad) +
 	cos(pceq.theta_rad) * sin(eqInitial.dec);
 
-    eqFinal-&gt;ra = modpi2(atan2(A, B) + pceq.z_rad);
-    eqFinal-&gt;dec = circumpi(asin(C));
+    eqFinal-&gt;ra = ephModPi2(atan2(A, B) + pceq.z_rad);
+    eqFinal-&gt;dec = ephCircumPi(asin(C));
 }
 
 /*! @brief Calculates certain values related to the precession
@@ -195,9 +195,9 @@
     double p = polynomial(data9, 4, t);
 
     EPH_PrecessionElEcliptical pcecl;
-    pcecl.n_rad = modpi2((n * 2 * pi) / (3600.0 * 360.0));
-    pcecl.II_rad = modpi2((II * 2 * pi) / (3600.0 * 360.0));
-    pcecl.p_rad = modpi2((p * 2 * pi) / (3600.0 * 360.0));
+    pcecl.n_rad = ephModPi2((n * 2 * pi) / (3600.0 * 360.0));
+    pcecl.II_rad = ephModPi2((II * 2 * pi) / (3600.0 * 360.0));
+    pcecl.p_rad = ephModPi2((p * 2 * pi) / (3600.0 * 360.0));
     return pcecl;
 }
 
@@ -236,8 +236,8 @@
 	(sin(pcecl.n_rad) * cos(eclInitial.latitude) *
 	 sin(pcecl.II_rad - eclInitial.longitude));
 
-    eclFinal-&gt;longitude = modpi2(-1 * (atan2(A, B) - pcecl.p_rad - pcecl.II_rad));
-    eclFinal-&gt;latitude = circumpi(asin(C));
+    eclFinal-&gt;longitude = ephModPi2(-1 * (atan2(A, B) - pcecl.p_rad - pcecl.II_rad));
+    eclFinal-&gt;latitude = ephCircumPi(asin(C));
 }
 
 /*! @brief Calculates proper motion in ecliptical coordinates, given

Modified: branches/new-vsop-prepare/src/c/libephemeritis/refraction.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/refraction.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/refraction.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -56,8 +56,8 @@
 {
     double R;
     double h0;
-    h0 = r_to_d(ap_alt);
-    R = (1 / (tan(d_to_r(h0 + (7.31 / (h0 + 4.4)))))) / 60.0;
+    h0 = ephRToD(ap_alt);
+    R = (1 / (tan(ephDToR(h0 + (7.31 / (h0 + 4.4)))))) / 60.0;
 
     /* Add the adjustment to make result equal 0 for straight up (page 106). */
     /*
@@ -66,7 +66,7 @@
 
     /* Calculate another correction (p106). */
     double correction =
-	(-0.06 * sin(d_to_r(14.7 * r_to_d(R) + 13.0))) / 60.0;
+                (-0.06 * sin(ephDToR(14.7 * ephRToD(R) + 13.0))) / 60.0;
     R += correction;
 
     /* Estimate correction for the atmosphere. */
@@ -74,7 +74,7 @@
     R *= atmospheric_multiplier;
 
     /* Return apparent altitude minus the adjustment to equal geometric altitude. */
-    return d_to_r(h0 - R);
+    return ephDToR(h0 - R);
 }
 
 /*! @brief Converts geometric altitude to apparent altitude.
@@ -99,8 +99,8 @@
 {
     double R;
     double h;
-    h = r_to_d(ge_alt);
-    R = (1.02 / (tan(d_to_r(h + (10.3 / (h + 5.11)))))) / 60.0;
+    h = ephRToD(ge_alt);
+    R = (1.02 / (tan(ephDToR(h + (10.3 / (h + 5.11)))))) / 60.0;
 
     /* Add the adjustment to make result equal 0 for straight up. */
     R += 0.0019279;
@@ -109,5 +109,5 @@
     double atmospheric_multiplier = (P / 1010.0) * (283.0 / (273.0 + T));
     R *= atmospheric_multiplier;
 
-    return d_to_r(h + R);
+    return ephDToR(h + R);
 }

Modified: branches/new-vsop-prepare/src/c/libephemeritis/riseset.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/riseset.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/riseset.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -92,7 +92,7 @@
 	       const double delta,
                double *jdRiseSet)
 {
-    const double _k1 = d_to_r(360.985647);
+    const double _k1 = ephDToR(360.985647);
     const double jd_ut = jd;
 
     const double THETA0 = ephSiderealTimeGreenwich(jd_ut);
@@ -147,7 +147,7 @@
     int i = 0;
     for (i = 0; i &lt; 20; i++) {
 	m0 = m;
-	const double theta0 = modpi2(THETA0 + _k1 * m);
+        const double theta0 = ephModPi2(THETA0 + _k1 * m);
 	const double n = m + deltaT_days;
 	if (n &lt; -1 || n &gt; 1) {
 	    /*
@@ -162,14 +162,14 @@
 	const double ra = interpolate_angle3(n, raList);
 	const double dec = interpolate3(n, decList);
 	double H = theta0 - geo_pos.longitude - ra;
-	H = diff_angle(0.0, H);
+        H = ephDiffAngle(0.0, H);
 
 	EPH_EquatorialCoords equ_pos;
 	equ_pos.ra = H;
 	equ_pos.dec = dec;
 
 	EPH_HorizonCoords hor_pos;
-	equ_to_horiz(geo_pos, equ_pos, &amp;hor_pos);
+        ephEquToHoriz(geo_pos, equ_pos, &amp;hor_pos);
 	const double dm =
 	    (hor_pos.altitude - h0) / (pi2 * cos(dec) * cos(geo_pos.latitude) * sin(H));
 	m += dm;
@@ -209,7 +209,7 @@
 	       const double delta,
                double *jdTransit)
 {
-    const double _k1 = d_to_r(360.985647);
+    const double _k1 = ephDToR(360.985647);
     const double jd_ut = jd;
     const double THETA0 = ephSiderealTimeGreenwich(jd_ut);
     const double deltaT_days = ephDeltaTSeconds(jd_ut) / seconds_per_day;
@@ -231,7 +231,7 @@
     int i = 0;
     for (i = 0; i &lt; 20; i++) {
 	const double m0 = m;
-	const double theta0 = modpi2(THETA0 + _k1 * m);
+        const double theta0 = ephModPi2(THETA0 + _k1 * m);
 	const double n = m + deltaT_days;
 	if (n &lt; -1 || n &gt; 1) {
 	    /*
@@ -244,7 +244,7 @@
 	}
 	const double ra = interpolate_angle3(n, raList);
 	double H = theta0 - geo_pos.longitude - ra;
-	H = diff_angle(0.0, H);
+        H = ephDiffAngle(0.0, H);
 	const double dm = -H / pi2;
 	m += dm;
 	if (fabs(m - m0) &lt; delta) {

Modified: branches/new-vsop-prepare/src/c/libephemeritis/solar.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/solar.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/solar.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -57,16 +57,16 @@
      * Constant terms:
      */
     const double _kL0[] =
-	{ d_to_r(280.46646), d_to_r(36000.76983), d_to_r(0.0003032) };
+	{ ephDToR(280.46646), ephDToR(36000.76983), ephDToR(0.0003032) };
     const double _kM[] =
-	{ d_to_r(357.52911), d_to_r(35999.05029), d_to_r(-0.0001537) };
+	{ ephDToR(357.52911), ephDToR(35999.05029), ephDToR(-0.0001537) };
     const double _kC[] =
-	{ d_to_r(1.914602), d_to_r(-0.004817), d_to_r(-0.000014) };
+	{ ephDToR(1.914602), ephDToR(-0.004817), ephDToR(-0.000014) };
     const double _ke[] = { 0.016708634, -0.000042037, -0.0000001267 };
 
-    const double _ck3 = d_to_r(0.019993);
-    const double _ck4 = d_to_r(-0.000101);
-    const double _ck5 = d_to_r(0.000289);
+    const double _ck3 = ephDToR(0.019993);
+    const double _ck4 = ephDToR(-0.000101);
+    const double _ck5 = ephDToR(0.000289);
 
     const double T = ephJdToJCent(jd);
     const double L0 = polynomial(_kL0, 3, T);
@@ -75,7 +75,7 @@
     const double C = (polynomial(_kC, 3, T) * sin(M))
 	+ ((_ck3 - (_ck4 * T)) * sin(2 * M))
 	+ (_ck5 * sin(3 * M));
-    *L = modpi2(L0 + C);
+    *L = ephModPi2(L0 + C);
     const double v = M + C;
     *R = 1.000001018 * (1 - e * e) / (1 + e * cos(v));
 }
@@ -97,14 +97,14 @@
     /*
      * Constant terms:
      */
-    const double _lk0 = d_to_r(125.04);
-    const double _lk1 = d_to_r(1934.136);
-    const double _lk2 = d_to_r(0.00569);
-    const double _lk3 = d_to_r(0.00478);
+    const double _lk0 = ephDToR(125.04);
+    const double _lk1 = ephDToR(1934.136);
+    const double _lk2 = ephDToR(0.00569);
+    const double _lk3 = ephDToR(0.00478);
 
     const double T = ephJdToJCent(jd);
     const double omega = _lk0 - _lk1 * T;
-    return modpi2(L - _lk2 - _lk3 * sin(omega));
+    return ephModPi2(L - _lk2 - _lk3 * sin(omega));
 }
 
 /*! @brief Corrects for aberration.
@@ -120,7 +120,7 @@
     /*
      * Constant terms:
      */
-    const double _lk4 = d_to_r(dms_to_d(0, 0, 20.4898));
+    const double _lk4 = ephDToR(ephDmsToD(0, 0, 20.4898));
     return -_lk4 / R;
 }
 
@@ -187,7 +187,7 @@
 /* { */
 /*     double X = vsop_dimension_vsop(jd, vEarth, dim); */
 /*     if (dim == vL) { */
-/* 	X = modpi2(X + pi); */
+/* 	X = ephModPi2(X + pi); */
 /*     } else if (dim == vB) { */
 /* 	X = -X; */
 /*     } */

Modified: branches/new-vsop-prepare/src/c/libephemeritis/util.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/util.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/util.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -95,9 +95,9 @@
        throw Error(&quot;astrolabe::util::interpolate_angle3: interpolating factor out of range&quot;);
      */
 
-    const double a = diff_angle(y[0], y[1]);
-    const double b = diff_angle(y[1], y[2]);
-    const double c = diff_angle(a, b);
+    const double a = ephDiffAngle(y[0], y[1]);
+    const double b = ephDiffAngle(y[1], y[2]);
+    const double c = ephDiffAngle(a, b);
     return y[1] + n / 2 * (a + b + n * c);
 }
 

Modified: branches/new-vsop-prepare/src/c/libephemeritis/vsop_calculate.c
===================================================================
--- branches/new-vsop-prepare/src/c/libephemeritis/vsop_calculate.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/libephemeritis/vsop_calculate.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -327,7 +327,7 @@
 
     /* Now return L, B and R.                                 */
     /* L, B and R come from varibles 0, 1 and 2 respectively. */
-    vsc.sc.ecl.longitude = modpi2(internal_vsop_dimension_calc(be, 0, jd));
+    vsc.sc.ecl.longitude = ephModPi2(internal_vsop_dimension_calc(be, 0, jd));
     vsc.sc.ecl.latitude = internal_vsop_dimension_calc(be, 1, jd);
     vsc.sc.R = internal_vsop_dimension_calc(be, 2, jd);
 
@@ -384,12 +384,12 @@
     static EPH_Bool static_set = false;
     if (!static_set) {
 	static_set = true;
-	l1 = -d_to_r(dms_to_d(0, 0, 0.09033));
-	l2 = d_to_r(dms_to_d(0, 0, 0.03916));
+        l1 = -ephDToR(ephDmsToD(0, 0, 0.09033));
+        l2 = ephDToR(ephDmsToD(0, 0, 0.03916));
 
 	terms[0] = 0.0;
-	terms[1] = d_to_r(1.397);
-	terms[2] = d_to_r(0.00031);
+        terms[1] = ephDToR(1.397);
+        terms[2] = ephDToR(0.00031);
     }
 
     double T = (output.vh.version == hel_sph_date) ? (ephJdToJCent(output.jd) / 10.0) : 0.0;
@@ -429,7 +429,7 @@
 	return output;
     }
 
-    output.sc.ecl.longitude = modpi2(output.sc.ecl.longitude + pi);
+    output.sc.ecl.longitude = ephModPi2(output.sc.ecl.longitude + pi);
     output.sc.ecl.latitude = -output.sc.ecl.latitude;
     output.is_inverted = output.is_inverted ^ 0x01;
     return output;

Modified: branches/new-vsop-prepare/src/c/tests/validate_meeus.c
===================================================================
--- branches/new-vsop-prepare/src/c/tests/validate_meeus.c	2006-07-24 07:54:19 UTC (rev 260)
+++ branches/new-vsop-prepare/src/c/tests/validate_meeus.c	2006-07-24 08:38:27 UTC (rev 261)
@@ -385,7 +385,7 @@
     printf(&quot;12.a Sidereal time (mean)\n&quot;);
     {
 	const double theta0 = ephSiderealTimeGreenwich(2446895.5);
-	const double fday = hms_to_fday(13, 10, 46.3668);
+        const double fday = ephHmsToFday(13, 10, 46.3668);
 	report(&quot;sidereal time&quot;, theta0 / pi2, fday,
 	       1.0 / (seconds_per_day * 1000), &quot;days&quot;);
     }
@@ -401,22 +401,22 @@
     {
 	EPH_EclipticalCoords ecl_pos;
 	EPH_EquatorialCoords equ_pos;
-	equ_pos.ra = d_to_r(116.328942);
-	equ_pos.dec = d_to_r(28.026183);
-	equ_to_ecl(equ_pos, d_to_r(23.4392911), &amp;ecl_pos);
-	report(&quot;longitude&quot;, r_to_d(ecl_pos.longitude), 113.215630, 1e-6, &quot;degrees&quot;);
-	report(&quot;latitude&quot;, r_to_d(ecl_pos.latitude), 6.684170, 1e-6, &quot;degrees&quot;);
+        equ_pos.ra = ephDToR(116.328942);
+        equ_pos.dec = ephDToR(28.026183);
+        ephEquToEcl(equ_pos, ephDToR(23.4392911), &amp;ecl_pos);
+	report(&quot;longitude&quot;, ephRToD(ecl_pos.longitude), 113.215630, 1e-6, &quot;degrees&quot;);
+	report(&quot;latitude&quot;, ephRToD(ecl_pos.latitude), 6.684170, 1e-6, &quot;degrees&quot;);
     }
 
     printf(&quot;13.a Ecliptical to equatorial coordinates\n&quot;);
     {
 	EPH_EquatorialCoords equ_pos;
 	EPH_EclipticalCoords ecl_pos;
-	ecl_pos.longitude = d_to_r(113.215630);
-	ecl_pos.latitude = d_to_r(6.684170);
-	ecl_to_equ(ecl_pos, d_to_r(23.4392911), &amp;equ_pos);
-	report(&quot;right accension&quot;, r_to_d(equ_pos.ra), 116.328942, 1e-6, &quot;degrees&quot;);
-	report(&quot;declination&quot;, r_to_d(equ_pos.dec), 28.026183, 1e-6, &quot;degrees&quot;);
+	ecl_pos.longitude = ephDToR(113.215630);
+	ecl_pos.latitude = ephDToR(6.684170);
+        ephEclToEqu(ecl_pos, ephDToR(23.4392911), &amp;equ_pos);
+	report(&quot;right accension&quot;, ephRToD(equ_pos.ra), 116.328942, 1e-6, &quot;degrees&quot;);
+	report(&quot;declination&quot;, ephRToD(equ_pos.dec), 28.026183, 1e-6, &quot;degrees&quot;);
     }
 
     /*
@@ -432,29 +432,29 @@
     printf(&quot;15.a Rise, Set, Transit\n&quot;);
     {
         EPH_GeographicCoords geo_pos;
-	geo_pos.latitude = d_to_r(42.3333);
-	geo_pos.longitude = d_to_r(71.0833);
+	geo_pos.latitude = ephDToR(42.3333);
+	geo_pos.longitude = ephDToR(71.0833);
 
 	/*
-	const double longitude = d_to_r(71.0833);
-	const double latitude = d_to_r(42.3333);
+	const double longitude = ephDToR(71.0833);
+	const double latitude = ephDToR(42.3333);
 	*/
 
 	const double ut = ephCalToJd(1988, 3, 20, true);
 	const double _raList[] =
-	    { d_to_r(40.68021), d_to_r(41.73129), d_to_r(42.78204) };
+	    { ephDToR(40.68021), ephDToR(41.73129), ephDToR(42.78204) };
 	const double _decList[] =
-	    { d_to_r(18.04761), d_to_r(18.44092), d_to_r(18.82742) };
+	    { ephDToR(18.04761), ephDToR(18.44092), ephDToR(18.82742) };
 
 	double jd;
         int result;
         
         result = ephHorizon(hRising, ut, geo_pos, _raList, _decList,
-		     d_to_r(-0.5667), days_per_minute, &amp;jd);
+		     ephDToR(-0.5667), days_per_minute, &amp;jd);
 	report(&quot;rise, julian days&quot;, jd - ut, 0.51766, 1e-5, &quot;days&quot;);
 
         result = ephHorizon(hSetting, ut, geo_pos, _raList, _decList,
-		     d_to_r(-0.5667), days_per_minute, &amp;jd);
+		     ephDToR(-0.5667), days_per_minute, &amp;jd);
 	report(&quot;set, julian days&quot;, jd - ut, 0.12130, 1e-5, &quot;days&quot;);
 
         result = ephTransit(ut, geo_pos, _raList, 1.0 / (60 * 24), &amp;jd);
@@ -468,23 +468,23 @@
 	   degree of accuracy in these unit tests may be because
 	   Meeus' examples are for a low degree of accuracy.
 	 */
-	double h0 = d_to_r(0.5);
+	double h0 = ephDToR(0.5);
 	double R = apparent_to_geom_alt(h0, 1010, 10);
-	report(&quot;geometric altitude&quot;, r_to_d(R), 1.246 / 60.0, 0.001,
+	report(&quot;geometric altitude&quot;, ephRToD(R), 1.246 / 60.0, 0.001,
 	       &quot;degrees&quot;);
 
-	h0 = d_to_r(90.0);
+	h0 = ephDToR(90.0);
 	R = apparent_to_geom_alt(h0, 1010, 10);
-	report(&quot;geometric altitude&quot;, r_to_d(R), 90.0, 0.002, &quot;degrees&quot;);
+	report(&quot;geometric altitude&quot;, ephRToD(R), 90.0, 0.002, &quot;degrees&quot;);
 
-	double h = d_to_r(0.5541);
+	double h = ephDToR(0.5541);
 	R = geom_to_apparent_alt(h, 1010, 10);
-	report(&quot;apparent altitude&quot;, r_to_d(R), 57.864 / 60.0, 0.01,
+	report(&quot;apparent altitude&quot;, ephRToD(R), 57.864 / 60.0, 0.01,
 	       &quot;degrees&quot;);
 
-	h = d_to_r(90.0);
+	h = ephDToR(90.0);
 	R = geom_to_apparent_alt(h, 1010, 10);
-	report(&quot;apparent altitude&quot;, r_to_d(R), 90.0, 0.002, &quot;degrees&quot;);
+	report(&quot;apparent altitude&quot;, ephRToD(R), 90.0, 0.002, &quot;degrees&quot;);
     }
 
     printf(&quot;17.a Angular Separation\n&quot;);
@@ -493,45 +493,45 @@
 	int n;
 
 	result =
-	    separation(d_to_r(213.9154), d_to_r(19.1825), d_to_r(201.2983),
-		       d_to_r(-11.1614));
-	report(&quot;1. separation&quot;, result, d_to_r(32.7930), 0.000001,
+	    separation(ephDToR(213.9154), ephDToR(19.1825), ephDToR(201.2983),
+		       ephDToR(-11.1614));
+	report(&quot;1. separation&quot;, result, ephDToR(32.7930), 0.000001,
 	       &quot;radians&quot;);
 
 	double _ra1List[] = {
-	    fday_to_r(hms_to_fday(10, 23, 17.65)),
-	    fday_to_r(hms_to_fday(10, 29, 44.27)),
-	    fday_to_r(hms_to_fday(10, 36, 19.63)),
-	    fday_to_r(hms_to_fday(10, 43, 1.75)),
-	    fday_to_r(hms_to_fday(10, 49, 48.85))
+	    ephFdayToR(ephHmsToFday(10, 23, 17.65)),
+	    ephFdayToR(ephHmsToFday(10, 29, 44.27)),
+	    ephFdayToR(ephHmsToFday(10, 36, 19.63)),
+	    ephFdayToR(ephHmsToFday(10, 43, 1.75)),
+	    ephFdayToR(ephHmsToFday(10, 49, 48.85))
 	};
 	double _dec1List[] = {
-	    d_to_r(dms_to_d(11, 31, 46.3)),
-	    d_to_r(dms_to_d(11, 2, 5.9)),
-	    d_to_r(dms_to_d(10, 29, 51.7)),
-	    d_to_r(dms_to_d(9, 55, 16.7)),
-	    d_to_r(dms_to_d(9, 18, 34.7))
+	    ephDToR(ephDmsToD(11, 31, 46.3)),
+	    ephDToR(ephDmsToD(11, 2, 5.9)),
+	    ephDToR(ephDmsToD(10, 29, 51.7)),
+	    ephDToR(ephDmsToD(9, 55, 16.7)),
+	    ephDToR(ephDmsToD(9, 18, 34.7))
 	};
 	double _ra2List[] = {
-	    fday_to_r(hms_to_fday(10, 33, 1.23)),
-	    fday_to_r(hms_to_fday(10, 33, 29.64)),
-	    fday_to_r(hms_to_fday(10, 33, 57.97)),
-	    fday_to_r(hms_to_fday(10, 34, 26.22)),
-	    fday_to_r(hms_to_fday(10, 34, 54.39))
+	    ephFdayToR(ephHmsToFday(10, 33, 1.23)),
+	    ephFdayToR(ephHmsToFday(10, 33, 29.64)),
+	    ephFdayToR(ephHmsToFday(10, 33, 57.97)),
+	    ephFdayToR(ephHmsToFday(10, 34, 26.22)),
+	    ephFdayToR(ephHmsToFday(10, 34, 54.39))
 	};
 	double _dec2List[] = {
-	    d_to_r(dms_to_d(10, 42, 53.5)),
-	    d_to_r(dms_to_d(10, 40, 13.2)),
-	    d_to_r(dms_to_d(10, 37, 33.4)),
-	    d_to_r(dms_to_d(10, 34, 53.9)),
-	    d_to_r(dms_to_d(10, 32, 14.9))
+	    ephDToR(ephDmsToD(10, 42, 53.5)),
+	    ephDToR(ephDmsToD(10, 40, 13.2)),
+	    ephDToR(ephDmsToD(10, 37, 33.4)),
+	    ephDToR(ephDmsToD(10, 34, 53.9)),
+	    ephDToR(ephDmsToD(10, 32, 14.9))
 	};
 	double _resultList[] = {
-	    d_to_r(2.5211),
-	    d_to_r(0.9917),
-	    d_to_r(0.5943),
-	    d_to_r(2.2145),
-	    d_to_r(3.8710)
+	    ephDToR(2.5211),
+	    ephDToR(0.9917),
+	    ephDToR(0.5943),
+	    ephDToR(2.2145),
+	    ephDToR(3.8710)
 	};
 	for (n = 0; n &lt; 5; n++) {
 	    double result =
@@ -546,25 +546,25 @@
 	   for basic stuff that should be obvious.
 	 */
 	result =
-	    separation(d_to_r(-45.0), d_to_r(0.0), d_to_r(45.0),
-		       d_to_r(0.0));
-	report(&quot;2. separation&quot;, result, d_to_r(90.0), 0.000001, &quot;radians&quot;);
+	    separation(ephDToR(-45.0), ephDToR(0.0), ephDToR(45.0),
+		       ephDToR(0.0));
+	report(&quot;2. separation&quot;, result, ephDToR(90.0), 0.000001, &quot;radians&quot;);
 
 	result =
-	    separation(d_to_r(-30.0), d_to_r(0.0), d_to_r(90.0),
-		       d_to_r(0.0));
-	report(&quot;3. separation&quot;, r_to_d(result), 120.0, 0.000001,
+	    separation(ephDToR(-30.0), ephDToR(0.0), ephDToR(90.0),
+		       ephDToR(0.0));
+	report(&quot;3. separation&quot;, ephRToD(result), 120.0, 0.000001,
 	       &quot;degrees&quot;);
 
 	result =
-	    separation(d_to_r(-30.0), d_to_r(0.0), d_to_r(300.0),
-		       d_to_r(0.0));
-	report(&quot;4. separation&quot;, r_to_d(result), 30.0, 0.000001, &quot;degrees&quot;);
+	    separation(ephDToR(-30.0), ephDToR(0.0), ephDToR(300.0),
+		       ephDToR(0.0));
+	report(&quot;4. separation&quot;, ephRToD(result), 30.0, 0.000001, &quot;degrees&quot;);
 
 	result =
-	    separation(d_to_r(0.0), d_to_r(0.0), d_to_r(45.0),
-		       d_to_r(45.0));
-	report(&quot;5. separation&quot;, r_to_d(result), 60.0, 0.000001, &quot;degrees&quot;);
+	    separation(ephDToR(0.0), ephDToR(0.0), ephDToR(45.0),
+		       ephDToR(45.0));
+	report(&quot;5. separation&quot;, ephRToD(result), 60.0, 0.000001, &quot;degrees&quot;);
     }
 
     printf(&quot;21 Epochs\n&quot;);
@@ -606,29 +606,29 @@
     {
 	EPH_EquatorialCoords eqInitial, eqFinal;
 	eqInitial.ra = 
-	    fday_to_r(hms_to_fday(2, 44, 11.986) +
-		      hms_to_fday(0.0, 0.0, 0.03425) * 28.86705);
+	    ephFdayToR(ephHmsToFday(2, 44, 11.986) +
+		      ephHmsToFday(0.0, 0.0, 0.03425) * 28.86705);
 	eqInitial.dec =
-	    d_to_r(dms_to_d(49, 13, 42.48) +
-		   dms_to_d(0.0, 0.0, 0.0895) * 28.86705);
+	    ephDToR(ephDmsToD(49, 13, 42.48) +
+		   ephDmsToD(0.0, 0.0, 0.0895) * 28.86705);
         ephPrecessionEq(ephPrecessionGetElementsEq(2451545.0, 2462088.69),
 		      eqInitial, &amp;eqFinal);
 
-	report(&quot;RA&quot;, eqFinal.ra, fday_to_r(hms_to_fday(2, 46, 11.331)), 0.00001,
+	report(&quot;RA&quot;, eqFinal.ra, ephFdayToR(ephHmsToFday(2, 46, 11.331)), 0.00001,
 	       &quot;radians&quot;);
-	report(&quot;Dec&quot;, eqFinal.dec, d_to_r(dms_to_d(49, 20, 54.54)), 0.0001,
+	report(&quot;Dec&quot;, eqFinal.dec, ephDToR(ephDmsToD(49, 20, 54.54)), 0.0001,
 	       &quot;radians&quot;);
     }
     printf(&quot;21.c Precession (ecliptical)\n&quot;);
     {
 	EPH_EclipticalCoords eclInitial, eclFinal;
-	eclInitial.longitude = d_to_r(149.48194);
-	eclInitial.latitude = d_to_r(1.76549);
+	eclInitial.longitude = ephDToR(149.48194);
+	eclInitial.latitude = ephDToR(1.76549);
         ephPrecessionEcl(ephPrecessionGetElementsEcl(ephJeToJd(2000.0), 1643074.5),
 		eclInitial, &amp;eclFinal);
 
-	report(&quot;Longitude&quot;, eclFinal.longitude, d_to_r(118.704), 0.00001, &quot;radians&quot;);
-	report(&quot;Latitude&quot;, eclFinal.latitude, d_to_r(1.615), 0.0001, &quot;radians&quot;);
+	report(&quot;Longitude&quot;, eclFinal.longitude, ephDToR(118.704), 0.00001, &quot;radians&quot;);
+	report(&quot;Latitude&quot;, eclFinal.latitude, ephDToR(1.615), 0.0001, &quot;radians&quot;);
     }
 
     printf(&quot;22.a Nutation (delta psi)\n&quot;);
@@ -636,7 +636,7 @@
         const double deltaPsi = ephNutInLon(2446895.5);
 	int d, m;
 	double s;
-	d_to_dms(r_to_d(deltaPsi), &amp;d, &amp;m, &amp;s);
+        ephDToDms(ephRToD(deltaPsi), &amp;d, &amp;m, &amp;s);
 	report(&quot;degrees&quot;, d, 0, 0, &quot;degrees&quot;);
 	report(&quot;minutes&quot;, m, 0, 0, &quot;minutes&quot;);
 	report(&quot;seconds&quot;, s, -3.788, 0.001, &quot;seconds&quot;);
@@ -647,7 +647,7 @@
         const double deltaEps = ephNutInObl(2446895.5);
 	int d, m;
 	double s;
-	d_to_dms(r_to_d(deltaEps), &amp;d, &amp;m, &amp;s);
+        ephDToDms(ephRToD(deltaEps), &amp;d, &amp;m, &amp;s);
 	report(&quot;degrees&quot;, d, 0, 0, &quot;degrees&quot;);
 	report(&quot;minutes&quot;, m, 0, 0, &quot;minutes&quot;);
 	report(&quot;seconds&quot;, s, 9.443, 0.001, &quot;seconds&quot;);
@@ -657,7 +657,7 @@
         const double eps = ephObliquityLow(2446895.5);
 	int d, m;
 	double s;
-	d_to_dms(r_to_d(eps), &amp;d, &amp;m, &amp;s);
+        ephDToDms(ephRToD(eps), &amp;d, &amp;m, &amp;s);
 	report(&quot;degrees&quot;, d, 23, 0, &quot;degrees&quot;);
 	report(&quot;minutes&quot;, m, 26, 0, &quot;minutes&quot;);
 	report(&quot;seconds&quot;, s, 27.407, 0.001, &quot;seconds&quot;);
@@ -667,7 +667,7 @@
         const double eps = ephObliquityHi(2446895.5);
 	int d, m;
 	double s;
-	d_to_dms(r_to_d(eps), &amp;d, &amp;m, &amp;s);
+        ephDToDms(ephRToD(eps), &amp;d, &amp;m, &amp;s);
 	report(&quot;degrees&quot;, d, 23, 0, &quot;degrees&quot;);
 	report(&quot;minutes&quot;, m, 26, 0, &quot;minutes&quot;);
 	report(&quot;seconds&quot;, s, 27.407, 0.001, &quot;seconds&quot;);
@@ -676,28 +676,28 @@
     printf(&quot;23.a Apparent place of a star\n&quot;);
     {
 	double jd = ephUtToDt(ephCalToJd(2028, 11, 13.19, true));
-	double ra = hms_to_r(2, 46, 11.331);
-	double dec = d_to_r(dms_to_d(49, 20, 54.54));
+        double ra = ephHmsToR(2, 46, 11.331);
+	double dec = ephDToR(ephDmsToD(49, 20, 54.54));
 
         double n_in_l = ephNutInLon(jd);
 	/*
-	   d_to_r(dms_to_d(0,0,14.861));
+	   ephDToR(ephDmsToD(0,0,14.861));
 	 */
 
         double n_in_o = ephNutInObl(jd);
 	/*
-	   d_to_r(dms_to_d(0,0,2.705));
+	   ephDToR(ephDmsToD(0,0,2.705));
 	 */
 
         double obl = ephObliquityHi(jd);
 	/*
-	   d_to_r(23.436);
+	   ephDToR(23.436);
 	 */
 
 	double sol_lon, sol_rad;
 	longitude_radius_low(jd, &amp;sol_lon, &amp;sol_rad);
 	/*
-	   sol_lon = d_to_r(231.328);
+	   sol_lon = ephDToR(231.328);
 	 */
 
 	double n_in_ra, n_in_dec;
@@ -710,32 +710,32 @@
 	/*
 	   int d1, m1, d2, m2;
 	   double s1, s2;
-	   d_to_dms(r_to_d(n_in_ra), &amp;d1, &amp;m1, &amp;s1);
-	   d_to_dms(r_to_d(n_in_dec), &amp;d2, &amp;m2, &amp;s2);
+           ephDToDms(ephRToD(n_in_ra), &amp;d1, &amp;m1, &amp;s1);
+           ephDToDms(ephRToD(n_in_dec), &amp;d2, &amp;m2, &amp;s2);
 	   printf(&quot;%d:%d:%.10f$$$%d:%d:%.10f\n&quot;, d1,m1,s1,d2,m2,s2);
 	 */
 
 	report(&quot;nutation in longitude&quot;, n_in_l,
-	       d_to_r(dms_to_d(0, 0, 14.861)), 0.000001, &quot;radians&quot;);
+	       ephDToR(ephDmsToD(0, 0, 14.861)), 0.000001, &quot;radians&quot;);
 	report(&quot;nutation in obliquity&quot;, n_in_o,
-	       d_to_r(dms_to_d(0, 0, 2.705)), 0.000001, &quot;radians&quot;);
-	report(&quot;obliquity&quot;, obl, d_to_r(23.436), 0.0001, &quot;radians&quot;);
-	report(&quot;sun's true longitude&quot;, sol_lon, d_to_r(231.328), 0.0001,
+	       ephDToR(ephDmsToD(0, 0, 2.705)), 0.000001, &quot;radians&quot;);
+	report(&quot;obliquity&quot;, obl, ephDToR(23.436), 0.0001, &quot;radians&quot;);
+	report(&quot;sun's true longitude&quot;, sol_lon, ephDToR(231.328), 0.0001,
 	       &quot;radians&quot;);
-	report(&quot;nutation in ra&quot;, n_in_ra, d_to_r(dms_to_d(0, 0, 15.843)),
+	report(&quot;nutation in ra&quot;, n_in_ra, ephDToR(ephDmsToD(0, 0, 15.843)),
 	       0.000001, &quot;radians&quot;);
-	report(&quot;nutation in dec&quot;, n_in_dec, d_to_r(dms_to_d(0, 0, 6.218)),
+	report(&quot;nutation in dec&quot;, n_in_dec, ephDToR(ephDmsToD(0, 0, 6.218)),
 	       0.000001, &quot;radians&quot;);
-	report(&quot;aberration in ra&quot;, a_in_ra, d_to_r(dms_to_d(0, 0, 30.045)),
+	report(&quot;aberration in ra&quot;, a_in_ra, ephDToR(ephDmsToD(0, 0, 30.045)),
 	       0.000001, &quot;radians&quot;);
 	report(&quot;aberration in dec&quot;, a_in_dec,
-	       d_to_r(dms_to_d(0, 0, 6.697)), 0.000001, &quot;radians&quot;);
+	       ephDToR(ephDmsToD(0, 0, 6.697)), 0.000001, &quot;radians&quot;);
 
 	double new_ra = ra + n_in_ra + a_in_ra;
 	double new_dec = dec + n_in_dec + a_in_dec;
 
-	report(&quot;ra&quot;, new_ra, hms_to_r(2, 46, 14.390), 0.000001, &quot;radians&quot;);
-	report(&quot;dec&quot;, new_dec, d_to_r(dms_to_d(49, 21, 07.45)), 0.000001,
+	report(&quot;ra&quot;, new_ra, ephHmsToR(2, 46, 14.390), 0.000001, &quot;radians&quot;);
+	report(&quot;dec&quot;, new_dec, ephDToR(ephDmsToD(49, 21, 07.45)), 0.000001,
 	       &quot;radians&quot;);
 
     }
@@ -744,10 +744,10 @@
     {
 	double L, R;
 	longitude_radius_low(2448908.5, &amp;L, &amp;R);
-	report(&quot;longitude&quot;, r_to_d(L), 199.90988, 1e-5, &quot;degrees&quot;);
+	report(&quot;longitude&quot;, ephRToD(L), 199.90988, 1e-5, &quot;degrees&quot;);
 	report(&quot;radius&quot;, R, 0.99766, 1e-5, &quot;au&quot;);
 	L = apparent_longitude_low(2448908.5, L);
-	report(&quot;longitude&quot;, r_to_d(L), 199.90895, 1e-5, &quot;degrees&quot;);
+	report(&quot;longitude&quot;, ephRToD(L), 199.90895, 1e-5, &quot;degrees&quot;);
     }
 
     printf(&quot;25.b Sun position, high precision\n&quot;);
@@ -758,19 +758,19 @@
 	EPH_VsopSphCoords vsc;
 	if(0 == get_vsop_data_handle(vsop_earth, hel_sph_date, &amp;vh)) {
 	  vsc = vsop_sph_sol(vsop_get_spherical(vh, jd));
-	  report(&quot;longitude&quot;, r_to_d(vsc.sc.ecl.longitude) * 3600, 199.907372 * 3600, 1.0,
+	  report(&quot;longitude&quot;, ephRToD(vsc.sc.ecl.longitude) * 3600, 199.907372 * 3600, 1.0,
 		 &quot;arc-seconds&quot;);
-	  report(&quot;latitude&quot;, r_to_d(vsc.sc.ecl.latitude) * 3600, 0.644, 1.0, &quot;arc-seconds&quot;);
+	  report(&quot;latitude&quot;, ephRToD(vsc.sc.ecl.latitude) * 3600, 0.644, 1.0, &quot;arc-seconds&quot;);
 	  report(&quot;radius&quot;, vsc.sc.R * km_per_au, 0.99760775 * km_per_au, 150.0,
 		 &quot;km&quot;);
 
 	  vsc = vsop_sph_to_fk5(vsc);
 
-	  report(&quot;corrected fk5 longitude&quot;, r_to_d(vsc.sc.ecl.longitude) * 3600,
+	  report(&quot;corrected fk5 longitude&quot;, ephRToD(vsc.sc.ecl.longitude) * 3600,
 		 199.907347 * 3600, 0.5, &quot;arc-seconds&quot;);
-	  report(&quot;corrected fk5 latitude&quot;, r_to_d(vsc.sc.ecl.latitude) * 3600, 0.644 - 0.023,
+	  report(&quot;corrected fk5 latitude&quot;, ephRToD(vsc.sc.ecl.latitude) * 3600, 0.644 - 0.023,
 		 0.5, &quot;arc-seconds&quot;);
-	  printf(&quot;%.10f %.10f %.10f\n&quot;, r_to_d(vsc.sc.ecl.latitude), r_to_d(vsc.sc.ecl.latitude) * 3600.0, vsc.sc.R);
+	  printf(&quot;%.10f %.10f %.10f\n&quot;, ephRToD(vsc.sc.ecl.latitude), ephRToD(vsc.sc.ecl.latitude) * 3600.0, vsc.sc.R);
 
 
 	  printf
@@ -781,22 +781,22 @@
           const double obl = ephObliquityHi(jd) + n_in_o;
 	  const double aberration = aberration_low(vsc.sc.R);
 
-	  report(&quot;nutation in lon&quot;, r_to_d(n_in_l) * 3600, 15.908, 0.001,
+	  report(&quot;nutation in lon&quot;, ephRToD(n_in_l) * 3600, 15.908, 0.001,
 		 &quot;arc-seconds&quot;);
-	  report(&quot;nutation in obliquity&quot;, r_to_d(n_in_o) * 3600, -0.308,
+	  report(&quot;nutation in obliquity&quot;, ephRToD(n_in_o) * 3600, -0.308,
 		 0.001, &quot;arc-seconds&quot;);
-	  report(&quot;obliquity&quot;, r_to_d(obl), 23.4401443, 0.0000001, &quot;degrees&quot;);
-	  report(&quot;aberration&quot;, r_to_d(aberration) * 3600, -20.539, 0.001,
+	  report(&quot;obliquity&quot;, ephRToD(obl), 23.4401443, 0.0000001, &quot;degrees&quot;);
+	  report(&quot;aberration&quot;, ephRToD(aberration) * 3600, -20.539, 0.001,
 		 &quot;arc-seconds&quot;);
 
 	  double app_lon = vsc.sc.ecl.longitude + n_in_l + aberration;
-	  report(&quot;apparent longitude&quot;, r_to_d(app_lon) * 3600.0,
-		 dms_to_d(199, 54, 21.818) * 3600.0, 1, &quot;arc-seconds&quot;);
+	  report(&quot;apparent longitude&quot;, ephRToD(app_lon) * 3600.0,
+		 ephDmsToD(199, 54, 21.818) * 3600.0, 1, &quot;arc-seconds&quot;);
 
-	  report(&quot;longitude&quot;, r_to_d(vsc.sc.ecl.longitude) * 3600 * 100,
-		 dms_to_d(199, 54, 26.18) * 3600 * 100, 1,
+	  report(&quot;longitude&quot;, ephRToD(vsc.sc.ecl.longitude) * 3600 * 100,
+		 ephDmsToD(199, 54, 26.18) * 3600 * 100, 1,
 		 &quot;arc-seconds/100&quot;);
-	  report(&quot;latitude&quot;, r_to_d(vsc.sc.ecl.latitude) * 3600 * 100, 0.72 * 100, 1,
+	  report(&quot;latitude&quot;, ephRToD(vsc.sc.ecl.latitude) * 3600 * 100, 0.72 * 100, 1,
 		 &quot;arc-seconds/100&quot;);
 	  report(&quot;radius&quot;, vsc.sc.R, 0.99760853, 1e-8, &quot;au&quot;);
 
@@ -825,8 +825,8 @@
 	    /*
             double obl = ephObliquityHi(jd);
 	    */
-	    report_diff(&quot;L&quot;, r_to_d(vsc.sc.ecl.longitude) * 3600.0, 199.907347 * 3600.0, &quot;arc-seconds&quot;);
-	    report_diff(&quot;B&quot;, r_to_d(vsc.sc.ecl.latitude) * 3600.0, dms_to_d(0,0,0.62) * 3600.0, &quot;arc-seconds&quot;);
+	    report_diff(&quot;L&quot;, ephRToD(vsc.sc.ecl.longitude) * 3600.0, 199.907347 * 3600.0, &quot;arc-seconds&quot;);
+	    report_diff(&quot;B&quot;, ephRToD(vsc.sc.ecl.latitude) * 3600.0, ephDmsToD(0,0,0.62) * 3600.0, &quot;arc-seconds&quot;);
 	    report_diff(&quot;R&quot;, vsc.sc.R * km_per_au, 0.99760775 * km_per_au, &quot;km&quot;);
 
 	    EPH_VsopRecCoords vrc = sol_sph_to_rec(vsc);
@@ -855,7 +855,7 @@
 	  printf(&quot;There was some kind of problem calculating the equinox: %d\n&quot;, e_state);
 	} else {
 	  report(&quot;julian day&quot;, jd,
-		 ephCalToJd(1962, 6, 21, true) + hms_to_fday(21, 24, 42),
+		 ephCalToJd(1962, 6, 21, true) + ephHmsToFday(21, 24, 42),
 		 1e-5, &quot;days&quot;);
 	}
     }
@@ -863,46 +863,46 @@
     printf(&quot;27(pg 182) Exact solstice (40 times)\n&quot;);
     {
 	const struct Data_27_Solstice _tbl[] = {
-	    {1996, kMarch, 20, hms_to_fday(8, 4, 7)},
-	    {1996, kJune, 21, hms_to_fday(2, 24, 46)},
-	    {1996, kSeptember, 22, hms_to_fday(18, 1, 8)},
-	    {1996, kDecember, 21, hms_to_fday(14, 6, 56)},
-	    {1997, kMarch, 20, hms_to_fday(13, 55, 42)},
-	    {1997, kJune, 21, hms_to_fday(8, 20, 59)},
-	    {1997, kSeptember, 22, hms_to_fday(23, 56, 49)},
-	    {1997, kDecember, 21, hms_to_fday(20, 8, 5)},
-	    {1998, kMarch, 20, hms_to_fday(19, 55, 35)},
-	    {1998, kJune, 21, hms_to_fday(14, 3, 38)},
-	    {1998, kSeptember, 23, hms_to_fday(5, 38, 15)},
-	    {1998, kDecember, 22, hms_to_fday(1, 57, 31)},
-	    {1999, kMarch, 21, hms_to_fday(1, 46, 53)},
-	    {1999, kJune, 21, hms_to_fday(19, 50, 11)},
-	    {1999, kSeptember, 23, hms_to_fday(11, 32, 34)},
-	    {1999, kDecember, 22, hms_to_fday(7, 44, 52)},
-	    {2000, kMarch, 20, hms_to_fday(7, 36, 19)},
-	    {2000, kJune, 21, hms_to_fday(1, 48, 46)},
-	    {2000, kSeptember, 22, hms_to_fday(17, 28, 40)},
-	    {2000, kDecember, 21, hms_to_fday(13, 38, 30)},
-	    {2001, kMarch, 20, hms_to_fday(13, 31, 47)},
-	    {2001, kJune, 21, hms_to_fday(7, 38, 48)},
-	    {2001, kSeptember, 22, hms_to_fday(23, 5, 32)},
-	    {2001, kDecember, 21, hms_to_fday(19, 22, 34)},
-	    {2002, kMarch, 20, hms_to_fday(19, 17, 13)},
-	    {2002, kJune, 21, hms_to_fday(13, 25, 29)},
-	    {2002, kSeptember, 23, hms_to_fday(4, 56, 28)},
-	    {2002, kDecember, 22, hms_to_fday(1, 15, 26)},
-	    {2003, kMarch, 21, hms_to_fday(1, 0, 50)},
-	    {2003, kJune, 21, hms_to_fday(19, 11, 32)},
-	    {2003, kSeptember, 23, hms_to_fday(10, 47, 53)},
-	    {2003, kDecember, 22, hms_to_fday(7, 4, 53)},
-	    {2004, kMarch, 20, hms_to_fday(6, 49, 42)},
-	    {2004, kJune, 21, hms_to_fday(0, 57, 57)},
-	    {2004, kSeptember, 22, hms_to_fday(16, 30, 54)},
-	    {2004, kDecember, 21, hms_to_fday(12, 42, 40)},
-	    {2005, kMarch, 20, hms_to_fday(12, 34, 29)},
-	    {2005, kJune, 21, hms_to_fday(6, 47, 12)},
-	    {2005, kSeptember, 22, hms_to_fday(22, 24, 14)},
-	    {2005, kDecember, 21, hms_to_fday(18, 36, 01)}
+	    {1996, kMarch, 20, ephHmsToFday(8, 4, 7)},
+	    {1996, kJune, 21, ephHmsToFday(2, 24, 46)},
+	    {1996, kSeptember, 22, ephHmsToFday(18, 1, 8)},
+	    {1996, kDecember, 21, ephHmsToFday(14, 6, 56)},
+	    {1997, kMarch, 20, ephHmsToFday(13, 55, 42)},
+	    {1997, kJune, 21, ephHmsToFday(8, 20, 59)},
+	    {1997, kSeptember, 22, ephHmsToFday(23, 56, 49)},
+	    {1997, kDecember, 21, ephHmsToFday(20, 8, 5)},
+	    {1998, kMarch, 20, ephHmsToFday(19, 55, 35)},
+	    {1998, kJune, 21, ephHmsToFday(14, 3, 38)},
+	    {1998, kSeptember, 23, ephHmsToFday(5, 38, 15)},
+	    {1998, kDecember, 22, ephHmsToFday(1, 57, 31)},
+	    {1999, kMarch, 21, ephHmsToFday(1, 46, 53)},
+	    {1999, kJune, 21, ephHmsToFday(19, 50, 11)},
+	    {1999, kSeptember, 23, ephHmsToFday(11, 32, 34)},
+	    {1999, kDecember, 22, ephHmsToFday(7, 44, 52)},
+	    {2000, kMarch, 20, ephHmsToFday(7, 36, 19)},
+	    {2000, kJune, 21, ephHmsToFday(1, 48, 46)},
+	    {2000, kSeptember, 22, ephHmsToFday(17, 28, 40)},
+	    {2000, kDecember, 21, ephHmsToFday(13, 38, 30)},
+	    {2001, kMarch, 20, ephHmsToFday(13, 31, 47)},
+	    {2001, kJune, 21, ephHmsToFday(7, 38, 48)},
+	    {2001, kSeptember, 22, ephHmsToFday(23, 5, 32)},
+	    {2001, kDecember, 21, ephHmsToFday(19, 22, 34)},
+	    {2002, kMarch, 20, ephHmsToFday(19, 17, 13)},
+	    {2002, kJune, 21, ephHmsToFday(13, 25, 29)},
+	    {2002, kSeptember, 23, ephHmsToFday(4, 56, 28)},
+	    {2002, kDecember, 22, ephHmsToFday(1, 15, 26)},
+	    {2003, kMarch, 21, ephHmsToFday(1, 0, 50)},
+	    {2003, kJune, 21, ephHmsToFday(19, 11, 32)},
+	    {2003, kSeptember, 23, ephHmsToFday(10, 47, 53)},
+	    {2003, kDecember, 22, ephHmsToFday(7, 4, 53)},
+	    {2004, kMarch, 20, ephHmsToFday(6, 49, 42)},
+	    {2004, kJune, 21, ephHmsToFday(0, 57, 57)},
+	    {2004, kSeptember, 22, ephHmsToFday(16, 30, 54)},
+	    {2004, kDecember, 21, ephHmsToFday(12, 42, 40)},
+	    {2005, kMarch, 20, ephHmsToFday(12, 34, 29)},
+	    {2005, kJune, 21, ephHmsToFday(6, 47, 12)},
+	    {2005, kSeptember, 22, ephHmsToFday(22, 24, 14)},
+	    {2005, kDecember, 21, ephHmsToFday(18, 36, 01)}
 	};
 
 	char season_names[4][10];
@@ -949,7 +949,7 @@
 	  printf(&quot;There was a problem calculating the equation of time: %d\n&quot;, e_state);
 	} else {
 	  report(&quot;Equation of time&quot;, eot_result * 3600.0,
-		 fday_to_r(hms_to_fday(0.0, 13.0, 42.6)) * 3600.0, 1,
+		 ephFdayToR(ephHmsToFday(0.0, 13.0, 42.6)) * 3600.0, 1,
 		 &quot;arc-sec&quot;);
 	}
     }
@@ -957,9 +957,9 @@
     printf(&quot;30.a Eccentricity anomoly (Equation of Kepler)\n&quot;);
     {
 	double e = 0.100;
-	double M = d_to_r(5.0);
+	double M = ephDToR(5.0);
 	double eok_result = eccentricity_anomoly(M, e, 33);
-	report(&quot;Eccentricity anoomly&quot;, eok_result, d_to_r(5.554589),
+	report(&quot;Eccentricity anoomly&quot;, eok_result, ephDToR(5.554589),
 	       0.0000001, &quot;radians&quot;);
     }
 
@@ -970,8 +970,8 @@
 	   vsop_dimension3_vsop(2448976.5, vVenus, &amp;L, &amp;B, &amp;R);
 	 */
 	if (vsop_dimension3_vsop_new(2448976.5, vsop_venus, &amp;L, &amp;B, &amp;R)) {
-	    report(&quot;longitude&quot;, r_to_d(L), 26.11428, 1.0, &quot;deg&quot;);
-	    report(&quot;latitude&quot;, r_to_d(B), -2.62070, 1.0, &quot;deg&quot;);
+	    report(&quot;longitude&quot;, ephRToD(L), 26.11428, 1.0, &quot;deg&quot;);
+	    report(&quot;latitude&quot;, ephRToD(B), -2.62070, 1.0, &quot;deg&quot;);
 	    report(&quot;radius&quot;, R * km_per_au, 0.724603 * km_per_au, 200.0,
 		   &quot;km&quot;);
 	} else {
@@ -985,14 +985,14 @@
       double jd = 2448976.5;
 	/*
 	   geocentric_planet(jd, vEarth, vVenus, vsop_dimension3_fk5,
-	   d_to_r(dms_to_d(0, 0, 16.749)),
-	   d_to_r(23.439669), days_per_second, &amp;ra, &amp;dec);
+	   ephDToR(ephDmsToD(0, 0, 16.749)),
+	   ephDToR(23.439669), days_per_second, &amp;ra, &amp;dec);
 	 */
       /*
 	geocentric_planet(jd, vsop_earth, vsop_venus,
 			  vsop_dimension3_fk5_new,
-			  d_to_r(dms_to_d(0, 0, 16.749)),
-			  d_to_r(23.439669), days_per_second, &amp;ra, &amp;dec);
+			  ephDToR(ephDmsToD(0, 0, 16.749)),
+			  ephDToR(23.439669), days_per_second, &amp;ra, &amp;dec);
       */
 
 	EPH_VsopErrorState result = ecliptic_planet(
@@ -1008,19 +1008,19 @@
 
 	  /* Add nutation in longitude. */
 	  /*
-	    longitude += d_to_r(dms_to_d(0, 0, 16.749));
+	    longitude += ephDToR(ephDmsToD(0, 0, 16.749));
 	  */
           ecl_pos.longitude += ephNutInLon(jd);
 
 
 	  /* Get equatorial coordinates. */
 	  EPH_EquatorialCoords equ_pos;
-          ecl_to_equ(ecl_pos, ephObliquityHi(jd) + ephNutInObl(jd), &amp;equ_pos);
+          ephEclToEqu(ecl_pos, ephObliquityHi(jd) + ephNutInObl(jd), &amp;equ_pos);
 
 
-	  report(&quot;ra&quot;, r_to_d(equ_pos.ra), r_to_d(hms_to_fday(21, 4, 41.454) * pi2),
+	  report(&quot;ra&quot;, ephRToD(equ_pos.ra), ephRToD(ephHmsToFday(21, 4, 41.454) * pi2),
 		 1e-5, &quot;degrees&quot;);
-	  report(&quot;dec&quot;, r_to_d(equ_pos.dec), dms_to_d(-18, 53, 16.84), 1e-5,
+	  report(&quot;dec&quot;, ephRToD(equ_pos.dec), ephDmsToD(-18, 53, 16.84), 1e-5,
 		 &quot;degrees&quot;);
 	}
     }
@@ -1032,9 +1032,9 @@
 	double jd = ephCalToJd(1990, 10, 6, true);
 	el.a = 2.2091404;
 	el.e = 0.8502196;
-	el.i = d_to_r(11.94524);
-	el.L = d_to_r(334.75006);
-	el.w = d_to_r(186.23352);
+	el.i = ephDToR(11.94524);
+	el.L = ephDToR(334.75006);
+	el.w = ephDToR(186.23352);
 	el.n = 0.01720209895 / (el.a * sqrt(el.a));
 	el.M = mean_anomoly(jd, T, el.n);
 
@@ -1097,9 +1097,9 @@
 
 	    report(&quot;recalc-delta-earth&quot;, body_r_earth, 0.8242811, 0.000001,
 		   &quot;AU&quot;);
-	    report(&quot;ra&quot;, r_to_d(equ_pos.ra) * 3600.0, 158.558965 * 3600.0, 0.01, &quot;arc-seconds&quot;);
-	    report(&quot;dec&quot;, r_to_d(equ_pos.dec) * 3600.0, 19.158496 * 3600.0, 0.01, &quot;arc-seconds&quot;);
-	    report(&quot;elongation&quot;, r_to_d(elongation), 40.51, 0.01,
+	    report(&quot;ra&quot;, ephRToD(equ_pos.ra) * 3600.0, 158.558965 * 3600.0, 0.01, &quot;arc-seconds&quot;);
+	    report(&quot;dec&quot;, ephRToD(equ_pos.dec) * 3600.0, 19.158496 * 3600.0, 0.01, &quot;arc-seconds&quot;);
+	    report(&quot;elongation&quot;, ephRToD(elongation), 40.51, 0.01,
 		   &quot;degrees&quot;);
 	}
 
@@ -1109,17 +1109,17 @@
     {
 	double L, B, R;
         ephElpDimension3(2448724.5, &amp;L, &amp;B, &amp;R);
-	report_diff(&quot;longitude&quot;, r_to_d(L) * 3600 * 1000,
+	report_diff(&quot;longitude&quot;, ephRToD(L) * 3600 * 1000,
 		    133.162655 * 3600 * 1000, &quot;arc-seconds/1000&quot;);
-	report(&quot;latitude&quot;, r_to_d(B), -3.229126, 1e-6, &quot;degrees&quot;);
+	report(&quot;latitude&quot;, ephRToD(B), -3.229126, 1e-6, &quot;degrees&quot;);
 	report(&quot;radius&quot;, R, 368409.7, 0.1, &quot;km&quot;);
 
         L = ephElpDimension(2448724.5, vL);
-	report_diff(&quot;longitude(1)&quot;, r_to_d(L) * 3600 * 1000,
+	report_diff(&quot;longitude(1)&quot;, ephRToD(L) * 3600 * 1000,
 		    133.162655 * 3600 * 1000, &quot;arc-seconds/1000&quot;);
 
         B = ephElpDimension(2448724.5, vB);
-	report(&quot;latitude(1)&quot;, r_to_d(B), -3.229126, 1e-6, &quot;degrees&quot;);
+	report(&quot;latitude(1)&quot;, ephRToD(B), -3.229126, 1e-6, &quot;degrees&quot;);
 
         R = ephElpDimension(2448724.5, vR);
 	report(&quot;radius(1)&quot;, R, 368409.7, 0.1, &quot;km&quot;);
@@ -1157,47 +1157,47 @@
 	orbit_s orbits[] = {
 	    {
 	     &quot;Ceres&quot;,
-	     ephCalToJd(2005, 1, 30, true), d_to_r(43.77971), 2.7673017,
-	     0.0800887, d_to_r(10.58276), d_to_r(73.72889),
-	     d_to_r(80.42334), 3.34, 0.12, d_to_r(0.21410131)
+	     ephCalToJd(2005, 1, 30, true), ephDToR(43.77971), 2.7673017,
+	     0.0800887, ephDToR(10.58276), ephDToR(73.72889),
+	     ephDToR(80.42334), 3.34, 0.12, ephDToR(0.21410131)
 	     },
 
 	    {
 	     &quot;Pallas&quot;,
-	     ephCalToJd(2005, 1, 30, true), d_to_r(28.70170), 2.7732372,
-	     0.2302220, d_to_r(34.85083), d_to_r(310.54489),
-	     d_to_r(173.16604), 4.13, 0.11, d_to_r(0.21341432)
+	     ephCalToJd(2005, 1, 30, true), ephDToR(28.70170), 2.7732372,
+	     0.2302220, ephDToR(34.85083), ephDToR(310.54489),
+	     ephDToR(173.16604), 4.13, 0.11, ephDToR(0.21341432)
 	     },
 
 	    {
 	     &quot;Juno&quot;,
-	     ephCalToJd(2005, 1, 30, true), d_to_r(300.24990), 2.6681509,
-	     0.2584015, d_to_r(12.97175), d_to_r(247.86205),
-	     d_to_r(170.12682), 5.33, 0.32, d_to_r(0.22614578)
+	     ephCalToJd(2005, 1, 30, true), ephDToR(300.24990), 2.6681509,
+	     0.2584015, ephDToR(12.97175), ephDToR(247.86205),
+	     ephDToR(170.12682), 5.33, 0.32, ephDToR(0.22614578)
 	     }
 	};
 
 	jd_test_values tests[] = {
 	    {&amp;orbits[0], ephUtToDt(ephCalToJd(2005, 5, 1, true)),
-	     hms_to_r(15, 20, 0.07 * 60.0),
-	     d_to_r(dms_to_d(-8.0, 33, 0.9 * 60.0)), 1.692, 2.683, 7.1},
+	     ephHmsToR(15, 20, 0.07 * 60.0),
+	     ephDToR(ephDmsToD(-8.0, 33, 0.9 * 60.0)), 1.692, 2.683, 7.1},
 	    {&amp;orbits[0], ephUtToDt(ephCalToJd(2005, 6, 10, true)),
-	     hms_to_r(14, 47, 0.78 * 60.0),
-	     d_to_r(dms_to_d(-9.0, 8, 0.4 * 60.0)), 1.837, 2.715, 7.6},
+	     ephHmsToR(14, 47, 0.78 * 60.0),
+	     ephDToR(ephDmsToD(-9.0, 8, 0.4 * 60.0)), 1.837, 2.715, 7.6},
 
 	    {&amp;orbits[1], ephUtToDt(ephCalToJd(2005, 2, 5, true)),
-	     hms_to_r(12, 42, 0.98 * 60.0),
-	     d_to_r(dms_to_d(-6.0, 39, 0.1 * 60.0)), 1.570, 2.271, 8.0},
+	     ephHmsToR(12, 42, 0.98 * 60.0),
+	     ephDToR(ephDmsToD(-6.0, 39, 0.1 * 60.0)), 1.570, 2.271, 8.0},
 	    {&amp;orbits[1], ephUtToDt(ephCalToJd(2005, 5, 1, true)),
-	     hms_to_r(12, 07, 0.76 * 60.0),
-	     d_to_r(dms_to_d(19.0, 20, 0.4 * 60.0)), 1.672, 2.449, 8.2},
+	     ephHmsToR(12, 07, 0.76 * 60.0),
+	     ephDToR(ephDmsToD(19.0, 20, 0.4 * 60.0)), 1.672, 2.449, 8.2},
 
 	    {&amp;orbits[2], ephUtToDt(ephCalToJd(2005, 9, 8, true)),
-	     hms_to_r(4, 44, 0.23 * 60.0),
-	     d_to_r(dms_to_d(10.0, 2, 0.1 * 60.0)), 1.649, 1.997, 9.0},
+	     ephHmsToR(4, 44, 0.23 * 60.0),
+	     ephDToR(ephDmsToD(10.0, 2, 0.1 * 60.0)), 1.649, 1.997, 9.0},
 	    {&amp;orbits[2], ephUtToDt(ephCalToJd(2005, 11, 12, true)),
-	     hms_to_r(5, 31, 0.69 * 60.0),
-	     d_to_r(dms_to_d(0.0, 24, 0.1 * 60.0)), 1.115, 1.984, 7.8}
+	     ephHmsToR(5, 31, 0.69 * 60.0),
+	     ephDToR(ephDmsToD(0.0, 24, 0.1 * 60.0)), 1.115, 1.984, 7.8}
 
 	};
 	int tests_size = sizeof(tests) / sizeof(*tests);
@@ -1261,7 +1261,7 @@
 
 	    int h, m;
 	    double s;
-	    r_to_hms(equ_pos.ra, &amp;h, &amp;m, &amp;s);
+            ephRToHms(equ_pos.ra, &amp;h, &amp;m, &amp;s);
 
 
 	    /* Things to do:
@@ -1291,8 +1291,8 @@
 	    dec += a_in_dec;
 	    */
 
-	    report_diff(&quot;RA              &quot;, r_to_d(equ_pos.ra) * 3600,
-			r_to_d(test-&gt;ra) * 3600,
+	    report_diff(&quot;RA              &quot;, ephRToD(equ_pos.ra) * 3600,
+			ephRToD(test-&gt;ra) * 3600,
 		   &quot;arc-sec&quot;);
 	    report_diff(&quot;Declination     &quot;, (equ_pos.dec * (360.0 * 60.0 * 60.0) / (2 * pi)),
 		   (test-&gt;dec * (360.0 * 60.0 * 60.0) / (2 * pi)),
@@ -1338,15 +1338,15 @@
 /* 	    /\* */
 /* 	    vsc = vsop_sph_to_fk5(vsc); */
 /* 	    *\/ */
-/* 	    report(&quot;longitude&quot;, r_to_d(modpi2(vsc.sc.L)) * 3600, 26.11428 * 3600, 0.001, &quot;arc-seconds&quot;); */
-/* 	    report(&quot;latitude&quot;, r_to_d(vsc.sc.B) * 3600, -2.62070 * 3600, 0.001, &quot;arc-seconds&quot;); */
+    /* 	    report(&quot;longitude&quot;, ephRToD(ephModPi2(vsc.sc.L)) * 3600, 26.11428 * 3600, 0.001, &quot;arc-seconds&quot;); */
+/* 	    report(&quot;latitude&quot;, ephRToD(vsc.sc.B) * 3600, -2.62070 * 3600, 0.001, &quot;arc-seconds&quot;); */
 /* 	    report(&quot;radius&quot;, vsc.sc.R * km_per_au, 0.724603 * km_per_au, 1.0, &quot;km&quot;); */
 
 /* 	    /\* */
 /* 	    double L, B, R; */
 /* 	    vsop_dimension3_vsop(2448976.5, vVenus, &amp;L, &amp;B, &amp;R); */
-/* 	    report(&quot;longitude&quot;, r_to_d(L) * 3600, 26.11428 * 3600, 1.0, &quot;arc-seconds&quot;); */
-/* 	    report(&quot;latitude&quot;, r_to_d(B) * 3600, -2.62070 * 3600, 1.0, &quot;arc-seconds&quot;); */
+/* 	    report(&quot;longitude&quot;, ephRToD(L) * 3600, 26.11428 * 3600, 1.0, &quot;arc-seconds&quot;); */
+/* 	    report(&quot;latitude&quot;, ephRToD(B) * 3600, -2.62070 * 3600, 1.0, &quot;arc-seconds&quot;); */
 /* 	    report(&quot;radius&quot;, R * km_per_au, 0.724603 * km_per_au, 200.0, &quot;km&quot;); */
 /* 	    printf(&quot;%.12f : %.12f : %.12f\n&quot;, vsc.sc.L, vsc.sc.B, vsc.sc.R); */
 /* 	    printf(&quot;%.12f : %.12f : %.12f\n&quot;, L, B, R); */


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000113.html">[Ephemeritis-svn] r260 - in branches/new-vsop-prepare/src/c:	libephemeritis tests
</A></li>
	<LI>Next message: <A HREF="000115.html">[Ephemeritis-svn] r262 - in branches/new-vsop-prepare/src/c:	libephemeritis tests
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#114">[ date ]</a>
              <a href="thread.html#114">[ thread ]</a>
              <a href="subject.html#114">[ subject ]</a>
              <a href="author.html#114">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ephemeritis-svn">More information about the Ephemeritis-svn
mailing list</a><br>
</body></html>
